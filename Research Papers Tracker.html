<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Papers Tracker</title>
    <style>
        :root {
            --color-bg-primary: #fcfcf9;
            --color-bg-secondary: #fffffd;
            --color-text-primary: #134252;
            --color-text-secondary: #626c71;
            --color-accent: #21808d;
            --color-accent-hover: #1d7480;
            --color-border: rgba(94, 82, 64, 0.2);
            --color-card-bg: #ffffff;
            --color-success: #21808d;
            --color-warning: #e68161;
        }

        .profile-section {
            max-width: 800px;
            margin: 0 auto;
        }

        .profile-card {
            background: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        .profile-header {
            display: flex;
            gap: 2rem;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--color-border);
        }

        .profile-picture {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--color-accent) 0%, #1d7480 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            flex-shrink: 0;
            border: 3px solid var(--color-accent);
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 2rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 0.5rem;
        }

        .profile-affiliation {
            font-size: 1.125rem;
            color: var(--color-accent);
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .profile-interests {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .interest-tag {
            padding: 0.375rem 0.875rem;
            background: rgba(33, 128, 141, 0.1);
            color: var(--color-accent);
            border-radius: 16px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .profile-quote {
            background: rgba(33, 128, 141, 0.05);
            border-left: 4px solid var(--color-accent);
            padding: 1.5rem;
            border-radius: 8px;
            font-style: italic;
            color: var(--color-text-secondary);
            font-size: 1.0625rem;
            line-height: 1.6;
        }

        .profile-stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .profile-stat-item {
            text-align: center;
            padding: 1.5rem;
            background: var(--color-bg-secondary);
            border-radius: 10px;
            border: 1px solid var(--color-border);
        }

        .profile-stat-value {
            font-size: 2rem;
            font-weight: 600;
            color: var(--color-accent);
            margin-bottom: 0.5rem;
        }

        .profile-stat-label {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            line-height: 1.6;
        }

        .header {
            background: var(--color-card-bg);
            border-bottom: 1px solid var(--color-border);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-accent);
        }

        .nav {
            display: flex;
            gap: 2rem;
        }

        .nav button {
            background: none;
            border: none;
            color: var(--color-text-secondary);
            font-size: 0.95rem;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .nav button:hover {
            color: var(--color-text-primary);
            background: rgba(33, 128, 141, 0.1);
        }

        .nav button.active {
            color: var(--color-accent);
            font-weight: 500;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            .dashboard .stat-card {
                grid-column: span 1 !important;
            }
        }

        .stat-card {
            background: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        .stat-card h3 {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-text-secondary);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 0.5rem;
        }

        .stat-subtext {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(33, 128, 141, 0.15);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: var(--color-accent);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .btn {
            padding: 0.625rem 1.25rem;
            border-radius: 8px;
            border: none;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--color-accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--color-accent-hover);
        }

        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--color-border);
        }

        .tab {
            padding: 0.75rem 1.5rem;
            border: none;
            background: none;
            color: var(--color-text-secondary);
            font-size: 0.9375rem;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--color-text-primary);
        }

        .tab.active {
            color: var(--color-accent);
            border-bottom-color: var(--color-accent);
        }

        .papers-grid {
            display: grid;
            gap: 1rem;
        }

        .paper-card {
            background: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 10px;
            padding: 1.5rem;
            display: flex;
            gap: 1.5rem;
            transition: box-shadow 0.2s;
        }

        .paper-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .paper-thumbnail {
            width: 80px;
            height: 100px;
            background: linear-gradient(135deg, var(--color-accent) 0%, #1d7480 100%);
            border-radius: 6px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: 600;
        }

        .paper-content {
            flex: 1;
        }

        .paper-title {
            font-size: 1.0625rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 0.5rem;
        }

        .paper-meta {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
        }

        .paper-meta-item {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .paper-review {
            font-size: 0.9375rem;
            color: var(--color-text-secondary);
            line-height: 1.5;
            margin-top: 0.75rem;
        }

        .paper-status-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem;
            gap: 1rem;
        }

        .paper-status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            background: rgba(33, 128, 141, 0.08);
            color: var(--color-accent);
        }

        .paper-progress {
            flex: 1;
            height: 6px;
            background: rgba(33, 128, 141, 0.12);
            border-radius: 999px;
            overflow: hidden;
        }

        .paper-progress-fill {
            height: 100%;
            background: var(--color-accent);
            border-radius: 999px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .paper-progress-label {
            font-size: 0.75rem;
            color: var(--color-text-secondary);
            margin-top: 0.25rem;
        }

        .paper-actions-row {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .pill-button {
            border-radius: 8px;
            padding: 0.625rem 1.25rem;
            border: 1px solid var(--color-border);
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .pill-button:hover {
            border-color: var(--color-accent);
            color: var(--color-accent);
            background: rgba(33, 128, 141, 0.05);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .pill-button:active {
            transform: translateY(0);
        }

        .rating {
            display: flex;
            gap: 0.25rem;
            margin-top: 0.5rem;
        }

        .star {
            color: #fbbf24;
            font-size: 1rem;
        }

        .star.empty {
            color: rgba(251, 191, 36, 0.3);
        }

        .tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.75rem;
        }

        .tag {
            padding: 0.25rem 0.75rem;
            background: rgba(33, 128, 141, 0.1);
            color: var(--color-accent);
            border-radius: 12px;
            font-size: 0.8125rem;
            font-weight: 500;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--color-text-secondary);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .suggester-card {
            background: var(--color-card-bg);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        }

        .suggester-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .suggester-header h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 0.5rem;
        }

        .suggester-header p {
            font-size: 0.9375rem;
            color: var(--color-text-secondary);
        }

        .filters-section {
            margin-bottom: 1.5rem;
        }

        .filters-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-text-secondary);
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .filters-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
        }

        .filter-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            user-select: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .filter-checkbox:hover {
            background: rgba(33, 128, 141, 0.05);
        }

        .filter-checkbox input[type="checkbox"] {
            display: none;
        }

        .checkbox-custom {
            width: 20px;
            height: 20px;
            border: 2px solid var(--color-border);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .filter-checkbox input[type="checkbox"]:checked + .checkbox-custom {
            background: var(--color-accent);
            border-color: var(--color-accent);
        }

        .filter-checkbox input[type="checkbox"]:checked + .checkbox-custom::after {
            content: '‚úì';
            color: white;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .filter-label {
            font-size: 0.9375rem;
            color: var(--color-text-primary);
            font-weight: 500;
        }

        .btn-randomize {
            width: 100%;
            padding: 1.25rem;
            background: linear-gradient(135deg, var(--color-accent) 0%, #1d7480 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 12px rgba(33, 128, 141, 0.3);
        }

        .btn-randomize:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 128, 141, 0.4);
        }

        .btn-randomize:active {
            transform: translateY(0);
        }

        .randomize-icon {
            font-size: 1.5rem;
            animation: spin 0.5s ease-in-out;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .btn-randomize:active .randomize-icon {
            animation: spin 0.5s ease-in-out;
        }

        .suggested-paper {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: rgba(33, 128, 141, 0.05);
            border: 1px solid rgba(33, 128, 141, 0.2);
            border-radius: 10px;
            animation: fadeIn 0.4s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .suggested-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-text-secondary);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .suggested-content {
            display: flex;
            gap: 1.5rem;
            align-items: flex-start;
        }

        .suggested-thumbnail {
            width: 60px;
            height: 75px;
            background: linear-gradient(135deg, var(--color-accent) 0%, #1d7480 100%);
            border-radius: 6px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.75rem;
        }

        .suggested-info {
            flex: 1;
        }

        .suggested-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: 0.5rem;
        }

        .suggested-meta {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
            margin-bottom: 0.75rem;
        }

        .suggested-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .search-filters-section {
            margin-bottom: 1.5rem;
        }

        .search-bar {
            position: relative;
            margin-bottom: 1rem;
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.25rem;
            color: var(--color-text-secondary);
            pointer-events: none;
        }

        .search-input {
            width: 100%;
            padding: 0.875rem 1rem 0.875rem 3rem;
            border: 2px solid var(--color-border);
            border-radius: 10px;
            font-size: 0.9375rem;
            background: var(--color-card-bg);
            color: var(--color-text-primary);
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.1);
        }

        .search-input::placeholder {
            color: var(--color-text-secondary);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background: var(--color-card-bg);
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-text-primary);
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--color-text-secondary);
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: rgba(33, 128, 141, 0.1);
            color: var(--color-text-primary);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--color-border);
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
        }

        .import-instructions {
            background: rgba(33, 128, 141, 0.05);
            border: 1px solid rgba(33, 128, 141, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .import-instructions p {
            font-weight: 500;
            color: var(--color-text-primary);
            margin-bottom: 0.75rem;
        }

        .import-instructions ol {
            margin-left: 1.25rem;
            color: var(--color-text-secondary);
            font-size: 0.9375rem;
            line-height: 1.6;
        }

        .import-instructions li {
            margin-bottom: 0.5rem;
        }

        .import-instructions a {
            color: var(--color-accent);
            text-decoration: none;
            font-weight: 500;
        }

        .import-instructions a:hover {
            text-decoration: underline;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--color-text-primary);
            margin-bottom: 0.5rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 0.9375rem;
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.1);
        }

        .form-hint {
            display: block;
            font-size: 0.8125rem;
            color: var(--color-text-secondary);
            margin-top: 0.5rem;
        }

        .import-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .checkbox-label:hover {
            background: rgba(33, 128, 141, 0.05);
        }

        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-label span {
            font-size: 0.9375rem;
            color: var(--color-text-primary);
        }

        .import-status {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.9375rem;
        }

        .import-status.success {
            background: rgba(33, 128, 141, 0.1);
            color: var(--color-success);
            border: 1px solid rgba(33, 128, 141, 0.3);
        }

        .import-status.error {
            background: rgba(230, 129, 97, 0.1);
            color: var(--color-warning);
            border: 1px solid rgba(230, 129, 97, 0.3);
        }

        .import-status.loading {
            background: rgba(33, 128, 141, 0.05);
            color: var(--color-text-secondary);
            border: 1px solid var(--color-border);
        }

        .btn-secondary {
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
        }

        .btn-secondary:hover {
            background: var(--color-bg-primary);
        }

        .filter-chips {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-chip {
            padding: 0.5rem 1rem;
            border: 1px solid var(--color-border);
            background: var(--color-card-bg);
            color: var(--color-text-secondary);
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-chip:hover {
            border-color: var(--color-accent);
            color: var(--color-text-primary);
        }

        .filter-chip.active {
            background: var(--color-accent);
            color: white;
            border-color: var(--color-accent);
        }

        .textarea-input {
            width: 100%;
            min-height: 100px;
            padding: 0.75rem;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 0.9375rem;
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            font-family: inherit;
            resize: vertical;
            transition: all 0.2s;
        }

        .textarea-input:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .tags-input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            padding: 0.75rem;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            background: var(--color-bg-primary);
            min-height: 45px;
            cursor: text;
        }

        .tags-input-container:focus-within {
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.1);
        }

        .tag-input-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.75rem;
            background: rgba(33, 128, 141, 0.1);
            color: var(--color-accent);
            border-radius: 12px;
            font-size: 0.8125rem;
            font-weight: 500;
        }

        .tag-remove {
            cursor: pointer;
            font-weight: bold;
            color: var(--color-accent);
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .tag-remove:hover {
            opacity: 1;
        }

        .tag-input-field {
            flex: 1;
            min-width: 120px;
            border: none;
            outline: none;
            background: transparent;
            color: var(--color-text-primary);
            font-size: 0.9375rem;
        }

        .rating-input {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .rating-star {
            font-size: 1.75rem;
            color: rgba(251, 191, 36, 0.3);
            cursor: pointer;
            transition: all 0.2s;
        }

        .rating-star:hover,
        .rating-star.active {
            color: #fbbf24;
            transform: scale(1.1);
        }

        .delete-button {
            background: rgba(230, 129, 97, 0.1);
            color: var(--color-warning);
            border: 1px solid rgba(230, 129, 97, 0.3);
        }

        .delete-button:hover {
            background: rgba(230, 129, 97, 0.2);
        }

        .emoji-picker-wrapper {
            position: relative;
        }

        .emoji-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
            padding: 0.75rem;
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: 8px;
        }

        .emoji-option {
            width: 45px;
            height: 45px;
            border: 2px solid var(--color-border);
            background: var(--color-card-bg);
            border-radius: 8px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .emoji-option:hover {
            border-color: var(--color-accent);
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(33, 128, 141, 0.2);
        }

        .emoji-option.selected {
            border-color: var(--color-accent);
            background: rgba(33, 128, 141, 0.1);
        }

        .profile-edit-section {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 1rem;
        }

        .btn-edit-profile {
            padding: 0.5rem 1rem;
            background: var(--color-accent);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-edit-profile:hover {
            background: var(--color-accent-hover);
        }

        .profile-picture-upload {
            position: relative;
            cursor: pointer;
        }

        .profile-picture-upload:hover::after {
            content: 'üì∑';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            background: rgba(0, 0, 0, 0.6);
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-picture-input {
            display: none;
        }

        .profile-editable {
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .profile-editable:hover {
            background: rgba(33, 128, 141, 0.1);
        }

        .profile-edit-input {
            width: 100%;
            padding: 0.5rem;
            border: 2px solid var(--color-accent);
            border-radius: 6px;
            font-size: inherit;
            font-weight: inherit;
            color: var(--color-text-primary);
            background: var(--color-bg-primary);
        }

        .profile-edit-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.1);
        }

        .profile-quote-edit {
            width: 100%;
            min-height: 100px;
            padding: 0.75rem;
            border: 2px solid var(--color-accent);
            border-radius: 8px;
            font-size: inherit;
            font-style: italic;
            color: var(--color-text-secondary);
            background: var(--color-bg-primary);
            font-family: inherit;
            line-height: 1.6;
            resize: vertical;
        }

        .profile-interests-edit {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .interest-tag-editable {
            position: relative;
        }

        .interest-remove {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 20px;
            height: 20px;
            background: var(--color-warning);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 0.75rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .interest-tag-editable:hover .interest-remove {
            opacity: 1;
        }

        .add-interest-input {
            padding: 0.375rem 0.875rem;
            border: 2px dashed var(--color-border);
            background: transparent;
            color: var(--color-text-primary);
            border-radius: 16px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .add-interest-input:focus {
            outline: none;
            border-color: var(--color-accent);
            border-style: solid;
        }

        .profile-goals-edit {
            list-style: none;
            margin-left: 0;
        }

        .profile-goal-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .profile-goal-item input {
            flex: 1;
            padding: 0.5rem;
            border: 2px solid var(--color-border);
            border-radius: 6px;
            background: var(--color-bg-primary);
            color: var(--color-text-secondary);
        }

        .profile-goal-item input:focus {
            outline: none;
            border-color: var(--color-accent);
        }

        .profile-goal-remove {
            background: none;
            border: none;
            color: var(--color-warning);
            cursor: pointer;
            font-size: 1.25rem;
            padding: 0.25rem;
        }

        .profile-goal-add {
            padding: 0.5rem 1rem;
            background: rgba(33, 128, 141, 0.1);
            color: var(--color-accent);
            border: 1px dashed var(--color-accent);
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .profile-goal-add:hover {
            background: rgba(33, 128, 141, 0.2);
        }

        .social-link-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--color-bg-secondary);
            border-radius: 8px;
            border: 1px solid var(--color-border);
            transition: all 0.2s;
        }

        .social-link-item:hover {
            border-color: var(--color-accent);
            box-shadow: 0 2px 8px rgba(33, 128, 141, 0.1);
        }

        .social-link-icon {
            font-size: 1.5rem;
        }

        .social-link-content {
            flex: 1;
        }

        .social-link-label {
            font-size: 0.8125rem;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.25rem;
        }

        .social-link-url {
            color: var(--color-accent);
            text-decoration: none;
            font-size: 0.9375rem;
            font-weight: 500;
        }

        .social-link-url:hover {
            text-decoration: underline;
        }

        .social-link-remove {
            background: none;
            border: none;
            color: var(--color-warning);
            cursor: pointer;
            font-size: 1.25rem;
            padding: 0.25rem;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .social-link-remove:hover {
            opacity: 1;
        }

        .add-social-link {
            padding: 0.75rem 1rem;
            background: rgba(33, 128, 141, 0.1);
            color: var(--color-accent);
            border: 1px dashed var(--color-accent);
            border-radius: 8px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }

        .add-social-link:hover {
            background: rgba(33, 128, 141, 0.2);
        }

        .social-link-form {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(33, 128, 141, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(33, 128, 141, 0.2);
        }

        .social-link-form input,
        .social-link-form select {
            padding: 0.5rem;
            border: 2px solid var(--color-border);
            border-radius: 6px;
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            font-size: 0.9375rem;
        }

        .social-link-form input:focus,
        .social-link-form select:focus {
            outline: none;
            border-color: var(--color-accent);
        }

        .social-link-form-buttons {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }

        .social-link-form-buttons button {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 1rem;
            }

            .dashboard {
                grid-template-columns: 1fr;
            }

            .paper-card {
                flex-direction: column;
            }

            .paper-thumbnail {
                width: 100%;
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìö PaperShelf</h1>
        <nav class="nav">
            <button class="active" data-nav="dashboard">Dashboard</button>
            <button data-nav="papers">My Papers</button>
            <button data-nav="profile">Profile</button>
        </nav>
    </div>

    <div class="container">
        <!-- Dashboard Stats -->
        <div class="dashboard" id="dashboardSection">
            <div class="stat-card" style="grid-column: span 2;">
                <h3>Monthly Goal</h3>
                <div class="stat-value" id="monthlyGoalValue">8 / 12</div>
                <div class="stat-subtext">Papers this month</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="monthlyProgressFill" style="width: 67%"></div>
                </div>
                <div id="goalAchievedMessage" style="display: none; margin-top: 1rem; padding: 0.75rem; background: rgba(33, 128, 141, 0.1); border-radius: 8px; color: var(--color-accent); font-weight: 500; text-align: center;">
                    üéâ Congratulations! You achieved your goal this month!
                </div>
            </div>

            <div class="stat-card">
                <h3>2026 Reading</h3>
                <div class="stat-value" id="yearlyReadValue">47</div>
                <div class="stat-subtext">Papers this year</div>
            </div>

            <div class="stat-card compact-stats" style="grid-column: span 3; padding: 1rem 1.5rem;">
                <div style="display: flex; justify-content: space-around; align-items: center; gap: 2rem;">
                    <div class="stat-click-target" data-target-tab="read" style="text-align: center; cursor: pointer;">
                        <div class="stat-value" style="font-size: 1.5rem; margin-bottom: 0.25rem;" id="readCount">47</div>
                        <div class="stat-subtext" style="font-size: 0.8125rem;">Papers Read</div>
                    </div>
                    <div style="width: 1px; height: 40px; background: var(--color-border);"></div>
                    <div class="stat-click-target" data-target-tab="currently-reading" style="text-align: center; cursor: pointer;">
                        <div class="stat-value" style="font-size: 1.5rem; margin-bottom: 0.25rem;" id="readingCount">3</div>
                        <div class="stat-subtext" style="font-size: 0.8125rem;">Currently Reading</div>
                    </div>
                    <div style="width: 1px; height: 40px; background: var(--color-border);"></div>
                    <div class="stat-click-target" data-target-tab="want-to-read" style="text-align: center; cursor: pointer;">
                        <div class="stat-value" style="font-size: 1.5rem; margin-bottom: 0.25rem;" id="wantToReadCount">23</div>
                        <div class="stat-subtext" style="font-size: 0.8125rem;">Want to Read</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Random Paper Suggester -->
        <div class="suggester-card">
            <div class="suggester-header">
                <h3>üç± Food for Thought Today!</h3>
                <p>Get a random paper suggestion from your reading list</p>
            </div>

            <div class="filters-section">
                <div class="filters-label">Filter by topics:</div>
                <div class="filters-grid">
                    <label class="filter-checkbox">
                        <input type="checkbox" id="filter-rl-theory" checked>
                        <span class="checkbox-custom"></span>
                        <span class="filter-label">RL Theory</span>
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" id="filter-physics-ai" checked>
                        <span class="checkbox-custom"></span>
                        <span class="filter-label">Physics & AI</span>
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" id="filter-transformers" checked>
                        <span class="checkbox-custom"></span>
                        <span class="filter-label">Transformers</span>
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" id="filter-bio-physics" checked>
                        <span class="checkbox-custom"></span>
                        <span class="filter-label">Biological Physics</span>
                    </label>
                    <label class="filter-checkbox">
                        <input type="checkbox" id="filter-ml" checked>
                        <span class="checkbox-custom"></span>
                        <span class="filter-label">ML Methods</span>
                    </label>
                </div>
            </div>

            <button class="btn-randomize" id="randomizeBtn">
                <span class="randomize-icon">üé≤</span>
                <span class="randomize-text">Randomize</span>
            </button>

            <div class="suggested-paper" id="suggestedPaper" style="display: none;">
                <div class="suggested-label">Today's Suggestion:</div>
                <div class="suggested-content">
                    <div class="suggested-thumbnail" id="suggestedThumbnail">üìÑ</div>
                    <div class="suggested-info">
                        <div class="suggested-title" id="suggestedTitle"></div>
                        <div class="suggested-meta" id="suggestedMeta"></div>
                        <div class="suggested-tags" id="suggestedTags"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Papers List Section -->
        <div class="section-header">
            <h2>My Papers</h2>
            <div style="display: flex; gap: 0.75rem;">
                <button class="btn btn-primary" id="importZoteroBtn">üì• Import from Zotero</button>
                <button class="btn btn-primary" id="addPaperBtn">+ Add Paper</button>
            </div>
        </div>

        <!-- Add Paper Modal -->
        <div id="addPaperModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="addPaperModalTitle">‚ûï Add New Paper</h3>
                    <button class="modal-close" id="closeAddPaperModal">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="addPaperForm">
                        <div class="form-group">
                            <label class="form-label" for="paperTitle">Title *</label>
                            <input type="text" id="paperTitle" class="form-input" placeholder="Enter paper title" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="paperAuthors">Authors *</label>
                                <input type="text" id="paperAuthors" class="form-input" placeholder="e.g., Smith et al." required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="paperYear">Year</label>
                                <input type="text" id="paperYear" class="form-input" placeholder="e.g., 2024">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="paperVenue">Venue / Journal</label>
                            <input type="text" id="paperVenue" class="form-input" placeholder="e.g., NeurIPS, Nature">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="paperEmoji">Icon (Emoji)</label>
                            <div class="emoji-picker-wrapper">
                                <input type="text" id="paperEmoji" class="form-input" placeholder="e.g., üî¨" maxlength="2" readonly>
                                <div class="emoji-options">
                                    <button type="button" class="emoji-option" data-emoji="üî¨">üî¨</button>
                                    <button type="button" class="emoji-option" data-emoji="ü§ñ">ü§ñ</button>
                                    <button type="button" class="emoji-option" data-emoji="üìä">üìä</button>
                                    <button type="button" class="emoji-option" data-emoji="üéØ">üéØ</button>
                                    <button type="button" class="emoji-option" data-emoji="‚ö°">‚ö°</button>
                                    <button type="button" class="emoji-option" data-emoji="üß¨">üß¨</button>
                                    <button type="button" class="emoji-option" data-emoji="üé®">üé®</button>
                                    <button type="button" class="emoji-option" data-emoji="üß†">üß†</button>
                                    <button type="button" class="emoji-option" data-emoji="‚öõÔ∏è">‚öõÔ∏è</button>
                                    <button type="button" class="emoji-option" data-emoji="üìÑ">üìÑ</button>
                                    <button type="button" class="emoji-option" data-emoji="üåü">üåü</button>
                                    <button type="button" class="emoji-option" data-emoji="üí°">üí°</button>
                                    <button type="button" class="emoji-option" data-emoji="üîç">üîç</button>
                                    <button type="button" class="emoji-option" data-emoji="üìà">üìà</button>
                                    <button type="button" class="emoji-option" data-emoji="üöÄ">üöÄ</button>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Tags</label>
                            <div class="tags-input-container" id="tagsInputContainer">
                                <input type="text" class="tag-input-field" id="tagInputField" placeholder="Type tag and press Enter">
                            </div>
                            <small class="form-hint">Press Enter to add tags</small>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="paperStatus">Status *</label>
                            <select id="paperStatus" class="form-input" required>
                                <option value="want-to-read">Want to Read</option>
                                <option value="currently-reading">Currently Reading</option>
                                <option value="read">Read</option>
                            </select>
                        </div>

                        <div class="form-group" id="progressGroup" style="display: none;">
                            <label class="form-label" for="paperProgress">Reading Progress (%)</label>
                            <input type="number" id="paperProgress" class="form-input" min="0" max="100" placeholder="0-100">
                        </div>

                        <div class="form-group" id="ratingGroup" style="display: none;">
                            <label class="form-label">Rating</label>
                            <div class="rating-input" id="ratingInput">
                                <span class="rating-star" data-rating="1">‚òÖ</span>
                                <span class="rating-star" data-rating="2">‚òÖ</span>
                                <span class="rating-star" data-rating="3">‚òÖ</span>
                                <span class="rating-star" data-rating="4">‚òÖ</span>
                                <span class="rating-star" data-rating="5">‚òÖ</span>
                            </div>
                        </div>

                        <div class="form-group" id="reviewGroup" style="display: none;">
                            <label class="form-label" for="paperReview">Review / Notes</label>
                            <textarea id="paperReview" class="textarea-input" placeholder="Share your thoughts about this paper..."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="cancelAddPaper">Cancel</button>
                    <button class="btn delete-button" id="deletePaperBtn" style="display: none;">Delete Paper</button>
                    <button class="btn btn-primary" id="savePaper">Save Paper</button>
                </div>
            </div>
        </div>

        <!-- Zotero Import Modal -->
        <div id="zoteroModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>üìö Import from Zotero</h3>
                    <button class="modal-close" id="closeModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="import-instructions">
                        <p><strong>How to connect your Zotero library:</strong></p>
                        <ol>
                            <li>Go to <a href="https://www.zotero.org/settings/keys" target="_blank" rel="noopener noreferrer">Zotero API Settings</a></li>
                            <li>Click "Create new private key"</li>
                            <li>Give it a name (e.g., "PaperShelf")</li>
                            <li>Enable "Allow library access" with "Read Only" permission</li>
                            <li>Copy the generated API key and paste below</li>
                        </ol>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="zoteroUserId">User ID:</label>
                        <input type="text" id="zoteroUserId" class="form-input" placeholder="Your Zotero User ID (e.g., 123456)">
                        <small class="form-hint">Find this in your Zotero account settings</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="zoteroApiKey">API Key:</label>
                        <input type="password" id="zoteroApiKey" class="form-input" placeholder="Paste your Zotero API key here">
                        <small class="form-hint">Your key is stored locally and never sent to our servers</small>
                    </div>
                    <div class="import-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="importReadPapers" checked>
                            <span>Import papers marked as "Read"</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="importUnreadPapers" checked>
                            <span>Import unread papers to "Want to Read"</span>
                        </label>
                    </div>
                    <div class="import-status" id="importStatus" style="display: none;"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="cancelImport">Cancel</button>
                    <button class="btn btn-primary" id="startImport">Import Papers</button>
                </div>
            </div>
        </div>

        <!-- Search and Filters -->
        <div class="search-filters-section">
            <div class="search-bar">
                <span class="search-icon">üîç</span>
                <input type="text" class="search-input" placeholder="Search by title, author, venue or tag..." id="searchInput">
            </div>
            <div class="filter-chips">
                <button class="filter-chip active" data-filter="all">All</button>
                <button class="filter-chip" data-filter="rl-theory">RL Theory</button>
                <button class="filter-chip" data-filter="physics-ai">Physics & AI</button>
                <button class="filter-chip" data-filter="transformers">Transformers</button>
                <button class="filter-chip" data-filter="bio-physics">Biological Physics</button>
                <button class="filter-chip" data-filter="ml">ML Methods</button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="want-to-read">Want to Read (23)</button>
            <button class="tab" data-tab="currently-reading">Currently Reading (3)</button>
            <button class="tab" data-tab="read">Read (47)</button>
        </div>

        <div class="papers-grid">
            <!-- Want to Read Papers (Sample) -->
            <div class="paper-card">
                <div class="paper-thumbnail">üî¨</div>
                <div class="paper-content">
                    <div class="paper-title">Attention Is All You Need</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Vaswani et al.</span>
                        <span class="paper-meta-item">üìÖ 2017</span>
                        <span class="paper-meta-item">üìñ NeurIPS</span>
                    </div>
                    <div class="tags">
                        <span class="tag">Deep Learning</span>
                        <span class="tag">Transformers</span>
                        <span class="tag">NLP</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">Want to Read</span>
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button" onclick="alert('Paper marked as started! Progress tracking coming soon.')">Mark as Started</button>
                    </div>
                </div>
            </div>

            <div class="paper-card">
                <div class="paper-thumbnail">ü§ñ</div>
                <div class="paper-content">
                    <div class="paper-title">Deep Reinforcement Learning for Active Matter Systems</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Smith et al.</span>
                        <span class="paper-meta-item">üìÖ 2024</span>
                        <span class="paper-meta-item">üìñ Nature Physics</span>
                    </div>
                    <div class="tags">
                        <span class="tag">Reinforcement Learning</span>
                        <span class="tag">Active Matter</span>
                        <span class="tag">Physics</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">Want to Read</span>
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button">Mark as Started</button>
                    </div>
                </div>
            </div>

            <div class="paper-card">
                <div class="paper-thumbnail">üìä</div>
                <div class="paper-content">
                    <div class="paper-title">Symbolic Regression Using PySR: A Comprehensive Review</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Johnson & Lee</span>
                        <span class="paper-meta-item">üìÖ 2023</span>
                        <span class="paper-meta-item">üìñ Machine Learning Review</span>
                    </div>
                    <div class="tags">
                        <span class="tag">Symbolic Regression</span>
                        <span class="tag">PySR</span>
                        <span class="tag">ML Methods</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">Want to Read</span>
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button">Mark as Started</button>
                    </div>
                </div>
            </div>

            <div class="paper-card">
                <div class="paper-thumbnail">üéØ</div>
                <div class="paper-content">
                    <div class="paper-title">Policy Gradient Methods for Reinforcement Learning with Function Approximation</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Sutton et al.</span>
                        <span class="paper-meta-item">üìÖ 2000</span>
                        <span class="paper-meta-item">üìñ NIPS</span>
                    </div>
                    <div class="tags">
                        <span class="tag">RL Theory</span>
                        <span class="tag">Policy Gradients</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">Want to Read</span>
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button">Mark as Started</button>
                    </div>
                </div>
            </div>

            <div class="paper-card">
                <div class="paper-thumbnail">üî¨</div>
                <div class="paper-content">
                    <div class="paper-title">Machine Learning for Collective Behavior in Biological Systems</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Brown & Wilson</span>
                        <span class="paper-meta-item">üìÖ 2024</span>
                        <span class="paper-meta-item">üìñ Nature Methods</span>
                    </div>
                    <div class="tags">
                        <span class="tag">Biological Physics</span>
                        <span class="tag">ML Methods</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">Want to Read</span>
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button">Mark as Started</button>
                    </div>
                </div>
            </div>

            <div class="paper-card">
                <div class="paper-thumbnail">‚ö°</div>
                <div class="paper-content">
                    <div class="paper-title">Physics-Informed Neural Networks: A Deep Learning Framework</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Raissi et al.</span>
                        <span class="paper-meta-item">üìÖ 2019</span>
                        <span class="paper-meta-item">üìñ Journal of Computational Physics</span>
                    </div>
                    <div class="tags">
                        <span class="tag">Physics & AI</span>
                        <span class="tag">Deep Learning</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">Want to Read</span>
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button">Mark as Started</button>
                    </div>
                </div>
            </div>

            <div class="paper-card">
                <div class="paper-thumbnail">üß¨</div>
                <div class="paper-content">
                    <div class="paper-title">Active Matter: From Biological to Synthetic Systems</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Marchetti et al.</span>
                        <span class="paper-meta-item">üìÖ 2013</span>
                        <span class="paper-meta-item">üìñ Reviews of Modern Physics</span>
                    </div>
                    <div class="tags">
                        <span class="tag">Biological Physics</span>
                        <span class="tag">Active Matter</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">Want to Read</span>
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button">Mark as Started</button>
                    </div>
                </div>
            </div>

            <div class="paper-card">
                <div class="paper-thumbnail">üé®</div>
                <div class="paper-content">
                    <div class="paper-title">Vision Transformers: A Survey on Recent Advances</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Liu et al.</span>
                        <span class="paper-meta-item">üìÖ 2023</span>
                        <span class="paper-meta-item">üìñ IEEE TPAMI</span>
                    </div>
                    <div class="tags">
                        <span class="tag">Transformers</span>
                        <span class="tag">Computer Vision</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">Want to Read</span>
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button">Mark as Started</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Example of Currently Reading (hidden by default) -->
        <div class="papers-grid" style="display: none;">
            <div class="paper-card">
                <div class="paper-thumbnail">‚öõÔ∏è</div>
                <div class="paper-content">
                    <div class="paper-title">Neural Network Approaches to Quantum Many-Body Problems</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Chen et al.</span>
                        <span class="paper-meta-item">üìÖ 2025</span>
                        <span class="paper-meta-item">üìñ Physical Review X</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">In Progress</span>
                        <div class="paper-progress">
                            <div class="paper-progress-fill" style="width: 45%;"></div>
                        </div>
                    </div>
                    <div class="paper-progress-label">45% read</div>
                    <div class="tags">
                        <span class="tag">Quantum Computing</span>
                        <span class="tag">Neural Networks</span>
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button" onclick="alert('Update progress percentage here.')">Quick Update</button>
                        <button class="pill-button" onclick="alert('Add your thoughts and notes about this paper.')">Add Thoughts</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Example of Read Papers (hidden by default) -->
        <div class="papers-grid" style="display: none;">
            <div class="paper-card">
                <div class="paper-thumbnail">üß†</div>
                <div class="paper-content">
                    <div class="paper-title">Self-Propelled Particles with Collective Behavior: A Review</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù Martinez & Garcia</span>
                        <span class="paper-meta-item">üìÖ 2023</span>
                        <span class="paper-meta-item">üìñ Physics Reports</span>
                        <span class="paper-meta-item">üìÖ Read: Jan 2026</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">Finished</span>
                        <div class="paper-progress">
                            <div class="paper-progress-fill" style="width: 100%;"></div>
                        </div>
                    </div>
                    <div class="paper-progress-label">100% read</div>
                    <div class="rating">
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star">‚òÖ</span>
                        <span class="star empty">‚òÖ</span>
                    </div>
                    <div class="paper-review">
                        Excellent comprehensive review of collective behavior in active matter. The mathematical framework was particularly well explained, and the examples from biological systems provided great intuition. Would recommend for anyone starting in this field.
                    </div>
                    <div class="paper-actions-row">
                        <button class="pill-button" onclick="alert('Edit your review and rating here.')">Edit Review</button>
                        <button class="pill-button" onclick="alert('Add key highlights and quotes from the paper.')">Add Highlights</button>
                    </div>
                    <div class="tags">
                        <span class="tag">Active Matter</span>
                        <span class="tag">Collective Behavior</span>
                        <span class="tag">Review Paper</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load papers from localStorage or use default
        let papers = JSON.parse(localStorage.getItem('papers')) || [
            {
                title: "Attention Is All You Need",
                authors: "Vaswani et al.",
                year: "2017",
                venue: "NeurIPS",
                emoji: "üî¨",
                tags: ["Transformers", "Deep Learning", "NLP"],
                categories: ["transformers", "ml"],
                status: "want-to-read",
                progress: 0
            },
            {
                title: "Deep Reinforcement Learning for Active Matter Systems",
                authors: "Smith et al.",
                year: "2024",
                venue: "Nature Physics",
                emoji: "ü§ñ",
                tags: ["Reinforcement Learning", "Active Matter", "Physics"],
                categories: ["rl-theory", "physics-ai"],
                status: "want-to-read",
                progress: 0
            },
            {
                title: "Symbolic Regression Using PySR: A Comprehensive Review",
                authors: "Johnson & Lee",
                year: "2023",
                venue: "Machine Learning Review",
                emoji: "üìä",
                tags: ["Symbolic Regression", "PySR", "ML Methods"],
                categories: ["ml"],
                status: "want-to-read",
                progress: 0
            },
            {
                title: "Policy Gradient Methods for Reinforcement Learning with Function Approximation",
                authors: "Sutton et al.",
                year: "2000",
                venue: "NIPS",
                emoji: "üéØ",
                tags: ["RL Theory", "Policy Gradients"],
                categories: ["rl-theory"],
                status: "want-to-read",
                progress: 0
            },
            {
                title: "Machine Learning for Collective Behavior in Biological Systems",
                authors: "Brown & Wilson",
                year: "2024",
                venue: "Nature Methods",
                emoji: "üî¨",
                tags: ["Biological Physics", "ML Methods"],
                categories: ["bio-physics", "ml"],
                status: "want-to-read",
                progress: 0
            },
            {
                title: "Physics-Informed Neural Networks: A Deep Learning Framework",
                authors: "Raissi et al.",
                year: "2019",
                venue: "Journal of Computational Physics",
                emoji: "‚ö°",
                tags: ["Physics & AI", "Deep Learning"],
                categories: ["physics-ai", "ml"],
                status: "want-to-read",
                progress: 0
            },
            {
                title: "Active Matter: From Biological to Synthetic Systems",
                authors: "Marchetti et al.",
                year: "2013",
                venue: "Reviews of Modern Physics",
                emoji: "üß¨",
                tags: ["Biological Physics", "Active Matter"],
                categories: ["bio-physics", "physics-ai"],
                status: "want-to-read",
                progress: 0
            },
            {
                title: "Vision Transformers: A Survey on Recent Advances",
                authors: "Liu et al.",
                year: "2023",
                venue: "IEEE TPAMI",
                emoji: "üé®",
                tags: ["Transformers", "Computer Vision"],
                categories: ["transformers", "ml"],
                status: "want-to-read",
                progress: 0,
                rating: 0,
                review: "",
                id: Date.now() + Math.random()
            }
        ];

        // Save papers to localStorage
        function savePapersToStorage() {
            localStorage.setItem('papers', JSON.stringify(papers));
            updateStats();
            renderPapers();
        }

        // Update statistics
        function updateStats() {
            const readCount = papers.filter(p => p.status === 'read').length;
            const readingCount = papers.filter(p => p.status === 'currently-reading').length;
            const wantToReadCount = papers.filter(p => p.status === 'want-to-read').length;

            document.getElementById('readCount').textContent = readCount;
            document.getElementById('readingCount').textContent = readingCount;
            document.getElementById('wantToReadCount').textContent = wantToReadCount;
            document.getElementById('yearlyReadValue').textContent = readCount;

            // Update tab counts
            document.querySelector('[data-tab="want-to-read"]').textContent = `Want to Read (${wantToReadCount})`;
            document.querySelector('[data-tab="currently-reading"]').textContent = `Currently Reading (${readingCount})`;
            document.querySelector('[data-tab="read"]').textContent = `Read (${readCount})`;
            
            // Update monthly goal
            const monthlyGoal = 12; // You can make this configurable later
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            
            // Count papers read this month
            const readThisMonth = papers.filter(p => {
                if (p.status !== 'read') return false;
                // If paper has a dateRead field, use it; otherwise assume recently read
                if (p.dateRead) {
                    const readDate = new Date(p.dateRead);
                    return readDate.getMonth() === currentMonth && readDate.getFullYear() === currentYear;
                }
                return false;
            }).length;
            
            document.getElementById('monthlyGoalValue').textContent = `${readThisMonth} / ${monthlyGoal}`;
            const progressPercentage = Math.min((readThisMonth / monthlyGoal) * 100, 100);
            document.getElementById('monthlyProgressFill').style.width = `${progressPercentage}%`;
            
            // Show congratulations message if goal achieved
            if (readThisMonth >= monthlyGoal) {
                document.getElementById('goalAchievedMessage').style.display = 'block';
            } else {
                document.getElementById('goalAchievedMessage').style.display = 'none';
            }
        }

        // Render papers in the grid
        function renderPapers() {
            const grids = document.querySelectorAll('.papers-grid');
            
            // Clear all grids
            grids.forEach(grid => grid.innerHTML = '');

            // Sort papers by most recent first
            const sortedPapers = [...papers].sort((a, b) => (b.id || 0) - (a.id || 0));

            sortedPapers.forEach(paper => {
                const card = createPaperCard(paper);
                
                // Add to appropriate grid
                if (paper.status === 'want-to-read') {
                    grids[0].appendChild(card);
                } else if (paper.status === 'currently-reading') {
                    grids[1].appendChild(card);
                } else if (paper.status === 'read') {
                    grids[2].appendChild(card);
                }
            });

            // Show empty state if no papers
            grids.forEach((grid, index) => {
                if (grid.children.length === 0) {
                    const emptyState = document.createElement('div');
                    emptyState.className = 'empty-state';
                    emptyState.innerHTML = `
                        <div class="empty-state-icon">üìö</div>
                        <p>No papers in this category yet</p>
                    `;
                    grid.appendChild(emptyState);
                }
            });
        }

        // Create paper card element
        function createPaperCard(paper) {
            const card = document.createElement('div');
            card.className = 'paper-card';
            card.dataset.paperId = paper.id;

            const statusBadgeText = paper.status === 'want-to-read' ? 'Want to Read' : 
                                   paper.status === 'currently-reading' ? 'In Progress' : 'Finished';

            let progressHTML = '';
            if (paper.status === 'currently-reading') {
                progressHTML = `
                    <div class="paper-progress">
                        <div class="paper-progress-fill" style="width: ${paper.progress}%;"></div>
                    </div>
                    <div class="paper-progress-label">${paper.progress}% read</div>
                `;
            } else if (paper.status === 'read') {
                progressHTML = `
                    <div class="paper-progress">
                        <div class="paper-progress-fill" style="width: 100%;"></div>
                    </div>
                    <div class="paper-progress-label">100% read</div>
                `;
            }

            let ratingHTML = '';
            if (paper.status === 'read' && paper.rating > 0) {
                ratingHTML = '<div class="rating">';
                for (let i = 1; i <= 5; i++) {
                    ratingHTML += `<span class="star ${i > paper.rating ? 'empty' : ''}">‚òÖ</span>`;
                }
                ratingHTML += '</div>';
            }

            let reviewHTML = '';
            if (paper.status === 'read' && paper.review) {
                reviewHTML = `<div class="paper-review">${paper.review}</div>`;
            }

            let actionsHTML = '';
            if (paper.status === 'want-to-read') {
                actionsHTML = `
                    <button class="pill-button" onclick="updatePaperStatus('${paper.id}', 'currently-reading')">üìñ Mark as Started</button>
                    <button class="pill-button" onclick="editPaper('${paper.id}')">‚úèÔ∏è Edit</button>
                `;
            } else if (paper.status === 'currently-reading') {
                actionsHTML = `
                    <button class="pill-button" onclick="updatePaperStatus('${paper.id}', 'read')">‚úÖ Mark as Finished</button>
                    <button class="pill-button" onclick="editPaper('${paper.id}')">‚úèÔ∏è Edit</button>
                `;
            } else {
                actionsHTML = `
                    <button class="pill-button" onclick="editPaper('${paper.id}')">‚úèÔ∏è Edit Review</button>
                `;
            }

            const tagsHTML = paper.tags.map(tag => `<span class="tag">${tag}</span>`).join('');

            card.innerHTML = `
                <div class="paper-thumbnail">${paper.emoji}</div>
                <div class="paper-content">
                    <div class="paper-title">${paper.title}</div>
                    <div class="paper-meta">
                        <span class="paper-meta-item">üìù ${paper.authors}</span>
                        <span class="paper-meta-item">üìÖ ${paper.year}</span>
                        <span class="paper-meta-item">üìñ ${paper.venue}</span>
                    </div>
                    <div class="paper-status-row">
                        <span class="paper-status-badge">${statusBadgeText}</span>
                        ${progressHTML}
                    </div>
                    ${ratingHTML}
                    ${reviewHTML}
                    <div class="paper-actions-row">
                        ${actionsHTML}
                    </div>
                    <div class="tags">
                        ${tagsHTML}
                    </div>
                </div>
            `;

            return card;
        }

        // Update paper status
        function updatePaperStatus(paperId, newStatus) {
            const paper = papers.find(p => p.id == paperId);
            if (paper) {
                paper.status = newStatus;
                if (newStatus === 'currently-reading' && paper.progress === 0) {
                    paper.progress = 10;
                } else if (newStatus === 'read') {
                    paper.progress = 100;
                    // Add dateRead timestamp when marking as read
                    paper.dateRead = new Date().toISOString();
                }
                savePapersToStorage();
            }
        }

        // Edit paper
        function editPaper(paperId) {
            const paper = papers.find(p => p.id == paperId);
            if (!paper) return;

            currentEditingPaperId = paperId;
            
            // Populate form
            document.getElementById('paperTitle').value = paper.title;
            document.getElementById('paperAuthors').value = paper.authors;
            document.getElementById('paperYear').value = paper.year;
            document.getElementById('paperVenue').value = paper.venue;
            document.getElementById('paperEmoji').value = paper.emoji;
            document.getElementById('paperStatus').value = paper.status;
            document.getElementById('paperProgress').value = paper.progress || 0;
            document.getElementById('paperReview').value = paper.review || '';

            // Set rating
            selectedRating = paper.rating || 0;
            updateRatingStars();

            // Set tags
            currentTags = [...paper.tags];
            renderTags();

            // Update modal title and show delete button
            document.getElementById('addPaperModalTitle').textContent = '‚úèÔ∏è Edit Paper';
            document.getElementById('deletePaperBtn').style.display = 'inline-block';

            // Show appropriate fields based on status
            updateFormVisibility();

            // Show modal
            document.getElementById('addPaperModal').style.display = 'flex';
        }

        // Delete paper
        function deletePaper(paperId) {
            if (confirm('Are you sure you want to delete this paper?')) {
                papers = papers.filter(p => p.id != paperId);
                savePapersToStorage();
                document.getElementById('addPaperModal').style.display = 'none';
            }
        }

        // Check if monthly goal is achieved and show congratulations message
        function checkMonthlyGoal() {
            const goalValue = document.getElementById('monthlyGoalValue').textContent;
            const [current, target] = goalValue.split(' / ').map(n => parseInt(n.trim()));
            
            if (current >= target) {
                document.getElementById('goalAchievedMessage').style.display = 'block';
                document.getElementById('monthlyProgressFill').style.width = '100%';
            }
        }
        
        // Run goal check on page load
        checkMonthlyGoal();

        // Navigation functionality
        const navButtons = document.querySelectorAll('.nav button');
        const dashboard = document.querySelector('.dashboard');
        const suggesterCard = document.querySelector('.suggester-card');
        const sectionHeader = document.querySelector('.section-header');
        const searchFiltersSection = document.querySelector('.search-filters-section');
        const tabsSection = document.querySelector('.tabs');
        
        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                const navTarget = button.dataset.nav;
                
                // Update active nav button
                navButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Show/hide sections based on navigation
                if (navTarget === 'dashboard') {
                    dashboard.style.display = 'grid';
                    suggesterCard.style.display = 'block';
                    sectionHeader.style.display = 'none';
                    searchFiltersSection.style.display = 'none';
                    tabsSection.style.display = 'none';
                    allPapersGrids.forEach(grid => grid.style.display = 'none');
                    const profileSection = document.getElementById('profileSection');
                    if (profileSection) profileSection.style.display = 'none';
                } else if (navTarget === 'papers') {
                    dashboard.style.display = 'none';
                    suggesterCard.style.display = 'none';
                    sectionHeader.style.display = 'flex';
                    searchFiltersSection.style.display = 'block';
                    tabsSection.style.display = 'flex';
                    
                    // Show the active tab's grid
                    const activeTabButton = document.querySelector('.tab.active');
                    const activeTabName = activeTabButton ? activeTabButton.dataset.tab : 'want-to-read';
                    
                    allPapersGrids.forEach((grid, index) => {
                        if (activeTabName === 'want-to-read' && index === 0) {
                            grid.style.display = 'grid';
                        } else if (activeTabName === 'currently-reading' && index === 1) {
                            grid.style.display = 'grid';
                        } else if (activeTabName === 'read' && index === 2) {
                            grid.style.display = 'grid';
                        } else {
                            grid.style.display = 'none';
                        }
                    });
                    
                    const profileSection = document.getElementById('profileSection');
                    if (profileSection) profileSection.style.display = 'none';
                } else if (navTarget === 'profile') {
                    dashboard.style.display = 'none';
                    suggesterCard.style.display = 'none';
                    sectionHeader.style.display = 'none';
                    searchFiltersSection.style.display = 'none';
                    tabsSection.style.display = 'none';
                    allPapersGrids.forEach(grid => grid.style.display = 'none');
                    
                    // Show profile section
                    const container = document.querySelector('.container');
                    let profileSection = document.getElementById('profileSection');
                    if (!profileSection) {
                        profileSection = document.createElement('div');
                        profileSection.id = 'profileSection';
                        profileSection.className = 'profile-section';
                        profileSection.innerHTML = `
                            <div class="profile-edit-section">
                                <button class="btn-edit-profile" id="editProfileBtn">‚úèÔ∏è Edit Profile</button>
                                <button class="btn-edit-profile" id="saveProfileBtn" style="display: none; margin-left: 0.5rem;">üíæ Save Profile</button>
                            </div>
                            <div class="profile-card">
                                <div class="profile-header">
                                    <div class="profile-picture profile-picture-upload" id="profilePicture">
                                        <span id="profilePictureEmoji">üë®‚Äçüî¨</span>
                                        <input type="file" id="profilePictureInput" class="profile-picture-input" accept="image/*">
                                    </div>
                                    <div class="profile-info">
                                        <h2 class="profile-name profile-editable" id="profileName">Your Name</h2>
                                        <div class="profile-affiliation profile-editable" id="profileAffiliation">PhD Student ‚Ä¢ TU Darmstadt</div>
                                        <div class="profile-interests" id="profileInterests">
                                            <span class="interest-tag">Reinforcement Learning</span>
                                            <span class="interest-tag">Active Matter</span>
                                            <span class="interest-tag">Machine Learning</span>
                                            <span class="interest-tag">Physics & AI</span>
                                            <span class="interest-tag">Symbolic Regression</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="profile-quote profile-editable" id="profileQuote">
                                    "The intersection of physics and artificial intelligence is where the most fascinating discoveries await. Every paper is a step toward understanding the emergent patterns of complex systems."
                                </div>
                                
                                <div class="profile-stats-grid">
                                    <div class="profile-stat-item">
                                        <div class="profile-stat-value" id="profileTotalPapers">73</div>
                                        <div class="profile-stat-label">Total Papers</div>
                                    </div>
                                    <div class="profile-stat-item">
                                        <div class="profile-stat-value" id="profileReadThisYear">47</div>
                                        <div class="profile-stat-label">Read in 2026</div>
                                    </div>
                                    <div class="profile-stat-item">
                                        <div class="profile-stat-value" id="profileAvgRating">4.2‚òÖ</div>
                                        <div class="profile-stat-label">Avg Rating</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="profile-card">
                                <h3 style="margin-bottom: 1rem; color: var(--color-text-primary);">Research Interests</h3>
                                <p class="profile-editable" id="profileResearchInterests" style="color: var(--color-text-secondary); line-height: 1.6;">
                                    Currently working at the interface of active matter and machine learning/AI. My primary focus areas include reinforcement learning applications in physical systems, supervised learning techniques for pattern recognition in complex systems, and symbolic regression using PySR for discovering interpretable equations from data.
                                </p>
                            </div>
                            
                            <div class="profile-card">
                                <h3 style="margin-bottom: 1rem; color: var(--color-text-primary);">Academic Goals</h3>
                                <ul id="profileGoals" style="color: var(--color-text-secondary); line-height: 1.8; margin-left: 1.5rem;">
                                    <li>Publish high-impact papers in top-tier journals (Nature, Science, Physical Review, NeurIPS)</li>
                                    <li>Master German language to B1 level for better integration</li>
                                    <li>Build strong research network through conferences and collaborations</li>
                                    <li>Secure a competitive industry position after PhD completion</li>
                                    <li>Continue exploring the intersection of physics and machine learning</li>
                                </ul>
                            </div>
                            
                            <div class="profile-card">
                                <h3 style="margin-bottom: 1rem; color: var(--color-text-primary);">Social Links</h3>
                                <div id="socialLinks" style="display: flex; flex-direction: column; gap: 0.75rem;">
                                    <div class="social-link-item">
                                        <span style="color: var(--color-text-secondary); font-size: 0.9375rem;">üîó No links added yet</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="profile-card">
                                <h3 style="margin-bottom: 1rem; color: var(--color-text-primary);">Data Management</h3>
                                <p style="color: var(--color-text-secondary); margin-bottom: 1rem; font-size: 0.9375rem;">
                                    Reset all your reading statistics and papers. This action cannot be undone.
                                </p>
                                <button class="btn delete-button" onclick="resetAllStatistics()">
                                    üóëÔ∏è Reset All Statistics
                                </button>
                            </div>
                        `;
                        container.appendChild(profileSection);
                    }
                    profileSection.style.display = 'block';
                    
                    // Update profile stats
                    updateProfileStats();
                }
            });
        });

        const randomizeBtn = document.getElementById('randomizeBtn');
        const suggestedPaper = document.getElementById('suggestedPaper');
        const suggestedThumbnail = document.getElementById('suggestedThumbnail');
        const suggestedTitle = document.getElementById('suggestedTitle');
        const suggestedMeta = document.getElementById('suggestedMeta');
        const suggestedTags = document.getElementById('suggestedTags');

        // Add Paper Modal
        const addPaperModal = document.getElementById('addPaperModal');
        const addPaperBtn = document.getElementById('addPaperBtn');
        const closeAddPaperModal = document.getElementById('closeAddPaperModal');
        const cancelAddPaper = document.getElementById('cancelAddPaper');
        const savePaper = document.getElementById('savePaper');
        const deletePaperBtn = document.getElementById('deletePaperBtn');
        const paperStatusSelect = document.getElementById('paperStatus');
        const tagInputField = document.getElementById('tagInputField');
        const tagsInputContainer = document.getElementById('tagsInputContainer');

        let currentTags = [];
        let selectedRating = 0;
        let currentEditingPaperId = null;

        // Open Add Paper modal
        addPaperBtn.addEventListener('click', () => {
            currentEditingPaperId = null;
            document.getElementById('addPaperForm').reset();
            currentTags = [];
            selectedRating = 0;
            renderTags();
            updateRatingStars();
            document.getElementById('addPaperModalTitle').textContent = '‚ûï Add New Paper';
            document.getElementById('deletePaperBtn').style.display = 'none';
            updateFormVisibility();
            addPaperModal.style.display = 'flex';
        });

        // Close Add Paper modal
        closeAddPaperModal.addEventListener('click', () => {
            addPaperModal.style.display = 'none';
        });

        cancelAddPaper.addEventListener('click', () => {
            addPaperModal.style.display = 'none';
        });

        // Close modal on outside click
        addPaperModal.addEventListener('click', (e) => {
            if (e.target === addPaperModal) {
                addPaperModal.style.display = 'none';
            }
        });

        // Update form visibility based on status
        function updateFormVisibility() {
            const status = paperStatusSelect.value;
            const progressGroup = document.getElementById('progressGroup');
            const ratingGroup = document.getElementById('ratingGroup');
            const reviewGroup = document.getElementById('reviewGroup');

            if (status === 'currently-reading') {
                progressGroup.style.display = 'block';
                ratingGroup.style.display = 'none';
                reviewGroup.style.display = 'none';
            } else if (status === 'read') {
                progressGroup.style.display = 'none';
                ratingGroup.style.display = 'block';
                reviewGroup.style.display = 'block';
            } else {
                progressGroup.style.display = 'none';
                ratingGroup.style.display = 'none';
                reviewGroup.style.display = 'none';
            }
        }

        paperStatusSelect.addEventListener('change', updateFormVisibility);

        // Tags input functionality
        tagInputField.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && tagInputField.value.trim()) {
                e.preventDefault();
                const tag = tagInputField.value.trim();
                if (!currentTags.includes(tag)) {
                    currentTags.push(tag);
                    renderTags();
                }
                tagInputField.value = '';
            }
        });

        function renderTags() {
            // Remove existing tag items
            const existingTags = tagsInputContainer.querySelectorAll('.tag-input-item');
            existingTags.forEach(tag => tag.remove());

            // Add tags before input field
            currentTags.forEach(tag => {
                const tagElement = document.createElement('div');
                tagElement.className = 'tag-input-item';
                tagElement.innerHTML = `
                    <span>${tag}</span>
                    <span class="tag-remove" onclick="removeTag('${tag}')">√ó</span>
                `;
                tagsInputContainer.insertBefore(tagElement, tagInputField);
            });
        }

        function removeTag(tag) {
            currentTags = currentTags.filter(t => t !== tag);
            renderTags();
        }

        // Rating functionality
        const ratingStars = document.querySelectorAll('.rating-star');
        ratingStars.forEach(star => {
            star.addEventListener('click', () => {
                selectedRating = parseInt(star.dataset.rating);
                updateRatingStars();
            });
        });

        function updateRatingStars() {
            ratingStars.forEach(star => {
                const rating = parseInt(star.dataset.rating);
                if (rating <= selectedRating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // Save paper
        savePaper.addEventListener('click', () => {
            const title = document.getElementById('paperTitle').value.trim();
            const authors = document.getElementById('paperAuthors').value.trim();
            const year = document.getElementById('paperYear').value.trim() || 'N/A';
            const venue = document.getElementById('paperVenue').value.trim() || 'Unknown';
            const emoji = document.getElementById('paperEmoji').value.trim() || 'üìÑ';
            const status = paperStatusSelect.value;
            const progress = parseInt(document.getElementById('paperProgress').value) || 0;
            const review = document.getElementById('paperReview').value.trim();

            if (!title || !authors) {
                alert('Please fill in required fields (Title and Authors)');
                return;
            }

            // Infer categories from tags
            const categories = inferCategories(currentTags);

            if (currentEditingPaperId) {
                // Update existing paper
                const paper = papers.find(p => p.id == currentEditingPaperId);
                if (paper) {
                    const oldStatus = paper.status;
                    paper.title = title;
                    paper.authors = authors;
                    paper.year = year;
                    paper.venue = venue;
                    paper.emoji = emoji;
                    paper.tags = [...currentTags];
                    paper.categories = categories;
                    paper.status = status;
                    paper.progress = progress;
                    paper.rating = selectedRating;
                    paper.review = review;
                    
                    // Add dateRead if status changed to read
                    if (status === 'read' && oldStatus !== 'read') {
                        paper.dateRead = new Date().toISOString();
                    }
                }
            } else {
                // Add new paper
                const newPaper = {
                    title,
                    authors,
                    year,
                    venue,
                    emoji,
                    tags: [...currentTags],
                    categories,
                    status,
                    progress,
                    rating: selectedRating,
                    review,
                    id: Date.now() + Math.random()
                };
                
                // Add dateRead if status is read
                if (status === 'read') {
                    newPaper.dateRead = new Date().toISOString();
                }
                
                papers.push(newPaper);
            }

            savePapersToStorage();
            addPaperModal.style.display = 'none';
        });

        // Delete paper button
        deletePaperBtn.addEventListener('click', () => {
            if (currentEditingPaperId) {
                deletePaper(currentEditingPaperId);
            }
        });

        // Zotero Import Modal
        const zoteroModal = document.getElementById('zoteroModal');
        const importZoteroBtn = document.getElementById('importZoteroBtn');
        const closeModal = document.getElementById('closeModal');
        const cancelImport = document.getElementById('cancelImport');
        const startImport = document.getElementById('startImport');
        const importStatus = document.getElementById('importStatus');

        // Open Zotero modal
        importZoteroBtn.addEventListener('click', () => {
            loadZoteroCredentials();
            zoteroModal.style.display = 'flex';
        });

        // Close Zotero modal
        closeModal.addEventListener('click', () => {
            zoteroModal.style.display = 'none';
        });

        cancelImport.addEventListener('click', () => {
            zoteroModal.style.display = 'none';
        });

        // Close modal on outside click
        zoteroModal.addEventListener('click', (e) => {
            if (e.target === zoteroModal) {
                zoteroModal.style.display = 'none';
            }
        });

        // Load saved Zotero credentials
        function loadZoteroCredentials() {
            const savedCreds = JSON.parse(localStorage.getItem('zoteroCredentials')) || {};
            if (savedCreds.userId) {
                document.getElementById('zoteroUserId').value = savedCreds.userId;
            }
            if (savedCreds.apiKey) {
                document.getElementById('zoteroApiKey').value = savedCreds.apiKey;
            }
        }

        // Save Zotero credentials
        function saveZoteroCredentials(userId, apiKey) {
            localStorage.setItem('zoteroCredentials', JSON.stringify({ userId, apiKey }));
        }

        // Start Zotero import
        startImport.addEventListener('click', async () => {
            const userId = document.getElementById('zoteroUserId').value.trim();
            const apiKey = document.getElementById('zoteroApiKey').value.trim();
            const importRead = document.getElementById('importReadPapers').checked;
            const importUnread = document.getElementById('importUnreadPapers').checked;

            if (!userId || !apiKey) {
                showImportStatus('error', '‚ö†Ô∏è Please provide both User ID and API Key');
                return;
            }

            // Save credentials for future use
            saveZoteroCredentials(userId, apiKey);

            showImportStatus('loading', 'üîÑ Connecting to Zotero...');

            try {
                // Fetch papers from Zotero API
                const response = await fetch(`https://api.zotero.org/users/${userId}/items?format=json&itemType=journalArticle&limit=100`, {
                    headers: {
                        'Zotero-API-Key': apiKey
                    }
                });

                if (!response.ok) {
                    throw new Error('Failed to connect to Zotero. Please check your credentials.');
                }

                const items = await response.json();
                
                if (items.length === 0) {
                    showImportStatus('error', 'üì≠ No papers found in your Zotero library');
                    return;
                }

                // Process and import papers
                let imported = 0;
                items.forEach(item => {
                    const data = item.data;
                    
                    // Example paper data structure from Zotero
                    const paper = {
                        title: data.title || 'Untitled',
                        authors: data.creators ? data.creators.map(c => c.lastName).join(', ') : 'Unknown',
                        year: data.date ? new Date(data.date).getFullYear().toString() : 'N/A',
                        venue: data.publicationTitle || 'Unknown',
                        emoji: getRandomEmoji(),
                        tags: data.tags ? data.tags.map(t => t.tag) : [],
                        categories: inferCategories(data.tags || []),
                        status: importRead && !importUnread ? 'read' : 'want-to-read',
                        progress: importRead && !importUnread ? 100 : 0,
                        rating: 0,
                        review: '',
                        id: Date.now() + Math.random() + imported
                    };

                    papers.push(paper);
                    imported++;
                });

                showImportStatus('success', `‚úÖ Successfully imported ${imported} papers from Zotero!`);
                
                savePapersToStorage();
                
                // Update UI after 2 seconds
                setTimeout(() => {
                    zoteroModal.style.display = 'none';
                }, 2000);

            } catch (error) {
                showImportStatus('error', `‚ùå Error: ${error.message}`);
            }
        });

        function showImportStatus(type, message) {
            importStatus.style.display = 'block';
            importStatus.className = `import-status ${type}`;
            importStatus.textContent = message;
        }

        function getRandomEmoji() {
            const emojis = ['üî¨', 'ü§ñ', 'üìä', 'üéØ', '‚ö°', 'üß¨', 'üé®', 'üß†', '‚öõÔ∏è', 'üìÑ'];
            return emojis[Math.floor(Math.random() * emojis.length)];
        }

        function inferCategories(tags) {
            const categories = [];
            const tagLower = tags.map(t => t.tag ? t.tag.toLowerCase() : t.toLowerCase());
            
            if (tagLower.some(t => t.includes('reinforcement') || t.includes('rl') || t.includes('policy'))) {
                categories.push('rl-theory');
            }
            if (tagLower.some(t => t.includes('physics') || t.includes('quantum'))) {
                categories.push('physics-ai');
            }
            if (tagLower.some(t => t.includes('transformer') || t.includes('attention'))) {
                categories.push('transformers');
            }
            if (tagLower.some(t => t.includes('biological') || t.includes('active matter'))) {
                categories.push('bio-physics');
            }
            if (tagLower.some(t => t.includes('machine learning') || t.includes('neural') || t.includes('deep learning'))) {
                categories.push('ml');
            }
            
            return categories.length > 0 ? categories : ['ml'];
        }

        // Tab switching functionality
        const tabs = document.querySelectorAll('.tab');
        const allPapersGrids = document.querySelectorAll('.papers-grid');
        let currentTab = 'want-to-read';
        
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show/hide appropriate papers grid
                allPapersGrids.forEach((grid, index) => {
                    if (tabName === 'want-to-read' && index === 0) {
                        grid.style.display = 'grid';
                    } else if (tabName === 'currently-reading' && index === 1) {
                        grid.style.display = 'grid';
                    } else if (tabName === 'read' && index === 2) {
                        grid.style.display = 'grid';
                    } else {
                        grid.style.display = 'none';
                    }
                });
                
                currentTab = tabName;
            });
        });

        // Search and filter functionality
        const searchInput = document.getElementById('searchInput');
        const filterChips = document.querySelectorAll('.filter-chip');
        let activeFilters = ['all'];

        // Filter chip toggle
        filterChips.forEach(chip => {
            chip.addEventListener('click', () => {
                const filter = chip.dataset.filter;
                
                if (filter === 'all') {
                    // If "All" is clicked, deactivate other filters
                    filterChips.forEach(c => c.classList.remove('active'));
                    chip.classList.add('active');
                    activeFilters = ['all'];
                } else {
                    // Deactivate "All" when specific filter is clicked
                    document.querySelector('[data-filter="all"]').classList.remove('active');
                    chip.classList.toggle('active');
                    
                    // Update active filters array
                    if (chip.classList.contains('active')) {
                        activeFilters = activeFilters.filter(f => f !== 'all');
                        if (!activeFilters.includes(filter)) {
                            activeFilters.push(filter);
                        }
                    } else {
                        activeFilters = activeFilters.filter(f => f !== filter);
                    }
                    
                    // If no filters active, activate "All"
                    if (activeFilters.length === 0) {
                        document.querySelector('[data-filter="all"]').classList.add('active');
                        activeFilters = ['all'];
                    }
                }
                
                filterPapers();
            });
        });

        // Search functionality
        searchInput.addEventListener('input', () => {
            filterPapers();
        });

        // Filter papers based on search and active filters
        function filterPapers() {
            const searchTerm = searchInput.value.toLowerCase();
            
            allPapersGrids.forEach(grid => {
                const paperCards = grid.querySelectorAll('.paper-card');
                let visibleCount = 0;
                
                paperCards.forEach(card => {
                    // Skip empty state elements
                    if (card.classList.contains('empty-state')) {
                        card.remove();
                        return;
                    }
                    
                    const title = card.querySelector('.paper-title').textContent.toLowerCase();
                    const meta = card.querySelector('.paper-meta').textContent.toLowerCase();
                    const tags = Array.from(card.querySelectorAll('.tag')).map(tag => tag.textContent.toLowerCase());
                    
                    // Check if matches search term
                    const matchesSearch = searchTerm === '' || 
                        title.includes(searchTerm) || 
                        meta.includes(searchTerm) || 
                        tags.some(tag => tag.includes(searchTerm));
                    
                    // Check if matches active filters
                    let matchesFilter = activeFilters.includes('all');
                    
                    if (!matchesFilter) {
                        // Get paper data from papers array based on title
                        const paperData = papers.find(p => p.title === card.querySelector('.paper-title').textContent);
                        if (paperData) {
                            matchesFilter = paperData.categories.some(cat => activeFilters.includes(cat));
                        }
                    }
                    
                    // Show/hide card
                    if (matchesSearch && matchesFilter) {
                        card.style.display = 'flex';
                        visibleCount++;
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                // Add empty state if no papers visible
                if (visibleCount === 0 && !grid.querySelector('.empty-state')) {
                    const emptyState = document.createElement('div');
                    emptyState.className = 'empty-state';
                    emptyState.innerHTML = `
                        <div class="empty-state-icon">üîç</div>
                        <p>No papers match your filters</p>
                    `;
                    grid.appendChild(emptyState);
                }
            });
        }

        randomizeBtn.addEventListener('click', () => {
            // Get selected filters
            const filters = {
                'rl-theory': document.getElementById('filter-rl-theory').checked,
                'physics-ai': document.getElementById('filter-physics-ai').checked,
                'transformers': document.getElementById('filter-transformers').checked,
                'bio-physics': document.getElementById('filter-bio-physics').checked,
                'ml': document.getElementById('filter-ml').checked
            };

            // Filter papers based on selected categories
            const filteredPapers = papers.filter(paper => {
                return paper.categories.some(category => filters[category]);
            });

            // If no papers match filters, show all papers
            const availablePapers = filteredPapers.length > 0 ? filteredPapers : papers;

            // Select random paper
            const randomPaper = availablePapers[Math.floor(Math.random() * availablePapers.length)];

            // Display the paper
            suggestedThumbnail.textContent = randomPaper.emoji;
            suggestedTitle.textContent = randomPaper.title;
            suggestedMeta.textContent = `üìù ${randomPaper.authors} ‚Ä¢ üìÖ ${randomPaper.year} ‚Ä¢ üìñ ${randomPaper.venue}`;
            
            // Display tags
            suggestedTags.innerHTML = randomPaper.tags
                .map(tag => `<span class="tag">${tag}</span>`)
                .join('');

            // Show the suggestion with animation
            suggestedPaper.style.display = 'block';

            // Trigger animation by removing and re-adding
            suggestedPaper.style.animation = 'none';
            setTimeout(() => {
                suggestedPaper.style.animation = 'fadeIn 0.4s ease-in-out';
            }, 10);
        });

        // Helper: switch to Papers view and a specific tab
        function goToPapersTab(tabName) {
            // Switch top nav to "My Papers"
            const papersNavBtn = document.querySelector('.nav button[data-nav="papers"]');
            if (papersNavBtn) {
                papersNavBtn.click();
            }

            // Activate the matching tab
            const targetTab = document.querySelector(`.tab[data-tab="${tabName}"]`);
            if (targetTab) {
                targetTab.click();
            }
        }

        // Make dashboard compact stats clickable
        const statClickTargets = document.querySelectorAll('.stat-click-target');
        statClickTargets.forEach(el => {
            el.addEventListener('click', () => {
                const tabName = el.dataset.targetTab;
                if (tabName) {
                    goToPapersTab(tabName);
                }
            });
        });

        // Update profile statistics
        function updateProfileStats() {
            const totalPapers = papers.length;
            const currentYear = new Date().getFullYear();
            
            // Count papers read this year
            const readThisYear = papers.filter(p => {
                if (p.status !== 'read') return false;
                if (p.dateRead) {
                    const readDate = new Date(p.dateRead);
                    return readDate.getFullYear() === currentYear;
                }
                return false;
            }).length;
            
            const ratedPapers = papers.filter(p => p.rating > 0);
            const avgRating = ratedPapers.length > 0 
                ? (ratedPapers.reduce((sum, p) => sum + p.rating, 0) / ratedPapers.length).toFixed(1)
                : '0.0';
            
            const profileTotalEl = document.getElementById('profileTotalPapers');
            const profileReadEl = document.getElementById('profileReadThisYear');
            const profileRatingEl = document.getElementById('profileAvgRating');
            
            if (profileTotalEl) profileTotalEl.textContent = totalPapers;
            if (profileReadEl) profileReadEl.textContent = readThisYear;
            if (profileRatingEl) profileRatingEl.textContent = avgRating + '‚òÖ';
        }

        // Load profile data from localStorage
        function loadProfileData() {
            const profileData = JSON.parse(localStorage.getItem('profileData')) || {
                name: 'Your Name',
                affiliation: 'PhD Student ‚Ä¢ TU Darmstadt',
                picture: 'üë®‚Äçüî¨',
                pictureType: 'emoji',
                quote: 'The intersection of physics and artificial intelligence is where the most fascinating discoveries await. Every paper is a step toward understanding the emergent patterns of complex systems.',
                interests: ['Reinforcement Learning', 'Active Matter', 'Machine Learning', 'Physics & AI', 'Symbolic Regression'],
                researchInterests: 'Currently working at the interface of active matter and machine learning/AI. My primary focus areas include reinforcement learning applications in physical systems, supervised learning techniques for pattern recognition in complex systems, and symbolic regression using PySR for discovering interpretable equations from data.',
                goals: [
                    'Publish high-impact papers in top-tier journals (Nature, Science, Physical Review, NeurIPS)',
                    'Master German language to B1 level for better integration',
                    'Build strong research network through conferences and collaborations',
                    'Secure a competitive industry position after PhD completion',
                    'Continue exploring the intersection of physics and machine learning'
                ],
                socialLinks: []
            };
            return profileData;
        }

        // Save profile data to localStorage
        function saveProfileData(profileData) {
            localStorage.setItem('profileData', JSON.stringify(profileData));
        }

        // Render profile with current data
        function renderProfile() {
            const profileData = loadProfileData();
            
            const nameEl = document.getElementById('profileName');
            const affiliationEl = document.getElementById('profileAffiliation');
            const pictureEl = document.getElementById('profilePictureEmoji');
            const quoteEl = document.getElementById('profileQuote');
            const interestsEl = document.getElementById('profileInterests');
            const researchEl = document.getElementById('profileResearchInterests');
            const goalsEl = document.getElementById('profileGoals');
            
            if (nameEl) nameEl.textContent = profileData.name;
            if (affiliationEl) affiliationEl.textContent = profileData.affiliation;
            
            if (pictureEl) {
                const pictureContainer = document.getElementById('profilePicture');
                if (profileData.pictureType === 'image') {
                    pictureContainer.style.backgroundImage = `url(${profileData.picture})`;
                    pictureContainer.style.backgroundSize = 'cover';
                    pictureContainer.style.backgroundPosition = 'center';
                    pictureEl.textContent = '';
                } else {
                    pictureContainer.style.backgroundImage = 'none';
                    pictureEl.textContent = profileData.picture;
                }
            }
            
            if (quoteEl) quoteEl.textContent = profileData.quote;
            
            if (interestsEl) {
                interestsEl.innerHTML = profileData.interests
                    .map(interest => `<span class="interest-tag">${interest}</span>`)
                    .join('');
            }
            
            if (researchEl) researchEl.textContent = profileData.researchInterests;
            
            if (goalsEl) {
                goalsEl.innerHTML = profileData.goals
                    .map(goal => `<li>${goal}</li>`)
                    .join('');
            }
            
            // Render social links
            const socialLinksEl = document.getElementById('socialLinks');
            if (socialLinksEl) {
                if (profileData.socialLinks && profileData.socialLinks.length > 0) {
                    socialLinksEl.innerHTML = profileData.socialLinks
                        .map((link, index) => `
                            <div class="social-link-item">
                                <span class="social-link-icon">${getSocialIcon(link.platform)}</span>
                                <div class="social-link-content">
                                    <div class="social-link-label">${link.platform}</div>
                                    <a href="${link.url}" target="_blank" rel="noopener noreferrer" class="social-link-url">${link.url}</a>
                                </div>
                                <button class="social-link-remove" onclick="removeSocialLink(${index})">√ó</button>
                            </div>
                        `).join('');
                } else {
                    socialLinksEl.innerHTML = '<div class="social-link-item"><span style="color: var(--color-text-secondary); font-size: 0.9375rem;">üîó No links added yet</span></div>';
                }
            }
        }

        // Get icon for social platform
        function getSocialIcon(platform) {
            const icons = {
                'LinkedIn': 'üíº',
                'GitHub': 'üíª',
                'Twitter': 'üê¶',
                'Google Scholar': 'üéì',
                'ResearchGate': 'üî¨',
                'ORCID': 'üÜî',
                'Website': 'üåê',
                'Other': 'üîó'
            };
            return icons[platform] || 'üîó';
        }

        // Reset all statistics
        function resetAllStatistics() {
            if (confirm('‚ö†Ô∏è Are you sure you want to reset ALL statistics and papers? This will:\n\n‚Ä¢ Delete all papers from your library\n‚Ä¢ Reset all reading statistics\n‚Ä¢ Clear all progress and ratings\n\nThis action CANNOT be undone!')) {
                if (confirm('This is your final warning. Are you absolutely sure?')) {
                    // Clear papers
                    papers = [];
                    localStorage.removeItem('papers');
                    
                    // Reset monthly goal display
                    document.getElementById('monthlyGoalValue').textContent = '0 / 12';
                    document.getElementById('monthlyProgressFill').style.width = '0%';
                    document.getElementById('goalAchievedMessage').style.display = 'none';
                    
                    // Update UI
                    updateStats();
                    renderPapers();
                    updateProfileStats();
                    
                    alert('‚úÖ All statistics have been reset successfully!');
                }
            }
        }

        // Add social link
        function addSocialLink() {
            const socialLinksEl = document.getElementById('socialLinks');
            
            // Create form
            const formDiv = document.createElement('div');
            formDiv.className = 'social-link-form';
            formDiv.innerHTML = `
                <select id="socialPlatformSelect">
                    <option value="LinkedIn">LinkedIn</option>
                    <option value="GitHub">GitHub</option>
                    <option value="Twitter">Twitter</option>
                    <option value="Google Scholar">Google Scholar</option>
                    <option value="ResearchGate">ResearchGate</option>
                    <option value="ORCID">ORCID</option>
                    <option value="Website">Website</option>
                    <option value="Other">Other</option>
                </select>
                <input type="url" id="socialUrlInput" placeholder="https://..." required>
                <div class="social-link-form-buttons">
                    <button class="btn-secondary" onclick="cancelAddSocialLink()">Cancel</button>
                    <button class="btn-primary" onclick="saveSocialLink()">Save</button>
                </div>
            `;
            
            socialLinksEl.appendChild(formDiv);
        }

        // Cancel adding social link
        function cancelAddSocialLink() {
            const form = document.querySelector('.social-link-form');
            if (form) form.remove();
        }

        // Save social link
        function saveSocialLink() {
            const platform = document.getElementById('socialPlatformSelect').value;
            const url = document.getElementById('socialUrlInput').value.trim();
            
            if (!url) {
                alert('Please enter a URL');
                return;
            }
            
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                alert('Please enter a valid URL starting with http:// or https://');
                return;
            }
            
            const profileData = loadProfileData();
            if (!profileData.socialLinks) {
                profileData.socialLinks = [];
            }
            
            profileData.socialLinks.push({ platform, url });
            saveProfileData(profileData);
            
            renderProfile();
            cancelAddSocialLink();
        }

        // Remove social link
        function removeSocialLink(index) {
            if (confirm('Remove this social link?')) {
                const profileData = loadProfileData();
                profileData.socialLinks.splice(index, 1);
                saveProfileData(profileData);
                renderProfile();
            }
        }

        // Profile editing functionality
        let isEditingProfile = false;

        document.addEventListener('click', (e) => {
            if (e.target.id === 'editProfileBtn' || e.target.closest('#editProfileBtn')) {
                enableProfileEditing();
            } else if (e.target.id === 'saveProfileBtn' || e.target.closest('#saveProfileBtn')) {
                saveProfileEditing();
            }
        });

        function enableProfileEditing() {
            isEditingProfile = true;
            const profileData = loadProfileData();
            
            document.getElementById('editProfileBtn').style.display = 'none';
            document.getElementById('saveProfileBtn').style.display = 'inline-block';
            
            // Enable picture upload
            const pictureUpload = document.getElementById('profilePictureInput');
            if (pictureUpload) {
                pictureUpload.addEventListener('change', handleProfilePictureUpload);
            }
            
            // Make name editable
            const nameEl = document.getElementById('profileName');
            if (nameEl) {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'profile-edit-input';
                input.value = profileData.name;
                input.style.fontSize = '2rem';
                input.style.fontWeight = '600';
                nameEl.replaceWith(input);
                input.id = 'profileName';
            }
            
            // Make affiliation editable
            const affiliationEl = document.getElementById('profileAffiliation');
            if (affiliationEl) {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'profile-edit-input';
                input.value = profileData.affiliation;
                input.style.fontSize = '1.125rem';
                affiliationEl.replaceWith(input);
                input.id = 'profileAffiliation';
            }
            
            // Make interests editable
            const interestsEl = document.getElementById('profileInterests');
            if (interestsEl) {
                interestsEl.innerHTML = profileData.interests
                    .map(interest => `
                        <span class="interest-tag interest-tag-editable">
                            ${interest}
                            <button class="interest-remove" onclick="removeInterest(this)">√ó</button>
                        </span>
                    `).join('') + 
                    '<input type="text" class="add-interest-input" placeholder="+ Add interest" onkeypress="addInterest(event)">';
            }
            
            // Make quote editable
            const quoteEl = document.getElementById('profileQuote');
            if (quoteEl) {
                const textarea = document.createElement('textarea');
                textarea.className = 'profile-quote-edit';
                textarea.value = profileData.quote;
                quoteEl.replaceWith(textarea);
                textarea.id = 'profileQuote';
            }
            
            // Make research interests editable
            const researchEl = document.getElementById('profileResearchInterests');
            if (researchEl) {
                const textarea = document.createElement('textarea');
                textarea.className = 'textarea-input';
                textarea.value = profileData.researchInterests;
                textarea.style.minHeight = '120px';
                researchEl.replaceWith(textarea);
                textarea.id = 'profileResearchInterests';
            }
            
            // Make goals editable
            const goalsEl = document.getElementById('profileGoals');
            if (goalsEl) {
                goalsEl.className = 'profile-goals-edit';
                goalsEl.innerHTML = profileData.goals
                    .map(goal => `
                        <li class="profile-goal-item">
                            <input type="text" value="${goal}">
                            <button class="profile-goal-remove" onclick="removeGoal(this)">√ó</button>
                        </li>
                    `).join('') + 
                    '<button class="profile-goal-add" onclick="addGoal()">+ Add goal</button>';
            }
            
            // Make social links editable
            const socialLinksEl = document.getElementById('socialLinks');
            if (socialLinksEl) {
                if (profileData.socialLinks && profileData.socialLinks.length > 0) {
                    socialLinksEl.innerHTML = profileData.socialLinks
                        .map((link, index) => `
                            <div class="social-link-item">
                                <span class="social-link-icon">${getSocialIcon(link.platform)}</span>
                                <div class="social-link-content">
                                    <div class="social-link-label">${link.platform}</div>
                                    <a href="${link.url}" target="_blank" rel="noopener noreferrer" class="social-link-url">${link.url}</a>
                                </div>
                                <button class="social-link-remove" onclick="removeSocialLink(${index})">√ó</button>
                            </div>
                        `).join('') + 
                        '<button class="add-social-link" onclick="addSocialLink()">+ Add social link</button>';
                } else {
                    socialLinksEl.innerHTML = '<button class="add-social-link" onclick="addSocialLink()">+ Add social link</button>';
                }
            }
        }

        function saveProfileEditing() {
            isEditingProfile = false;
            
            const profileData = loadProfileData();
            
            // Save name
            const nameInput = document.getElementById('profileName');
            if (nameInput && nameInput.tagName === 'INPUT') {
                profileData.name = nameInput.value;
                const h2 = document.createElement('h2');
                h2.className = 'profile-name profile-editable';
                h2.id = 'profileName';
                h2.textContent = profileData.name;
                nameInput.replaceWith(h2);
            }
            
            // Save affiliation
            const affiliationInput = document.getElementById('profileAffiliation');
            if (affiliationInput && affiliationInput.tagName === 'INPUT') {
                profileData.affiliation = affiliationInput.value;
                const div = document.createElement('div');
                div.className = 'profile-affiliation profile-editable';
                div.id = 'profileAffiliation';
                div.textContent = profileData.affiliation;
                affiliationInput.replaceWith(div);
            }
            
            // Save interests
            const interestsEl = document.getElementById('profileInterests');
            if (interestsEl) {
                const interestTags = interestsEl.querySelectorAll('.interest-tag');
                profileData.interests = Array.from(interestTags).map(tag => tag.textContent.replace('√ó', '').trim());
                interestsEl.innerHTML = profileData.interests
                    .map(interest => `<span class="interest-tag">${interest}</span>`)
                    .join('');
            }
            
            // Save quote
            const quoteTextarea = document.getElementById('profileQuote');
            if (quoteTextarea && quoteTextarea.tagName === 'TEXTAREA') {
                profileData.quote = quoteTextarea.value;
                const div = document.createElement('div');
                div.className = 'profile-quote profile-editable';
                div.id = 'profileQuote';
                div.textContent = profileData.quote;
                quoteTextarea.replaceWith(div);
            }
            
            // Save research interests
            const researchTextarea = document.getElementById('profileResearchInterests');
            if (researchTextarea && researchTextarea.tagName === 'TEXTAREA') {
                profileData.researchInterests = researchTextarea.value;
                const p = document.createElement('p');
                p.className = 'profile-editable';
                p.id = 'profileResearchInterests';
                p.style.cssText = 'color: var(--color-text-secondary); line-height: 1.6;';
                p.textContent = profileData.researchInterests;
                researchTextarea.replaceWith(p);
            }
            
            // Save goals
            const goalsEl = document.getElementById('profileGoals');
            if (goalsEl) {
                const goalInputs = goalsEl.querySelectorAll('input[type="text"]');
                profileData.goals = Array.from(goalInputs).map(input => input.value).filter(g => g.trim());
                goalsEl.className = '';
                goalsEl.style.cssText = 'color: var(--color-text-secondary); line-height: 1.8; margin-left: 1.5rem;';
                goalsEl.innerHTML = profileData.goals
                    .map(goal => `<li>${goal}</li>`)
                    .join('');
            }
            
            saveProfileData(profileData);
            renderProfile();
            
            document.getElementById('editProfileBtn').style.display = 'inline-block';
            document.getElementById('saveProfileBtn').style.display = 'none';
        }

        function handleProfilePictureUpload(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const profileData = loadProfileData();
                    profileData.picture = event.target.result;
                    profileData.pictureType = 'image';
                    
                    const pictureContainer = document.getElementById('profilePicture');
                    const pictureEmoji = document.getElementById('profilePictureEmoji');
                    
                    pictureContainer.style.backgroundImage = `url(${event.target.result})`;
                    pictureContainer.style.backgroundSize = 'cover';
                    pictureContainer.style.backgroundPosition = 'center';
                    pictureEmoji.textContent = '';
                    
                    saveProfileData(profileData);
                };
                reader.readAsDataURL(file);
            }
        }

        // Add click handler for profile picture
        document.addEventListener('click', (e) => {
            if (isEditingProfile && e.target.closest('#profilePicture')) {
                document.getElementById('profilePictureInput').click();
            }
        });

        function removeInterest(button) {
            button.closest('.interest-tag').remove();
        }

        function addInterest(event) {
            if (event.key === 'Enter' && event.target.value.trim()) {
                const interest = event.target.value.trim();
                const span = document.createElement('span');
                span.className = 'interest-tag interest-tag-editable';
                span.innerHTML = `
                    ${interest}
                    <button class="interest-remove" onclick="removeInterest(this)">√ó</button>
                `;
                event.target.parentNode.insertBefore(span, event.target);
                event.target.value = '';
            }
        }

        function removeGoal(button) {
            button.closest('.profile-goal-item').remove();
        }

        function addGoal() {
            const goalsEl = document.getElementById('profileGoals');
            const addButton = goalsEl.querySelector('.profile-goal-add');
            const li = document.createElement('li');
            li.className = 'profile-goal-item';
            li.innerHTML = `
                <input type="text" placeholder="Enter your goal...">
                <button class="profile-goal-remove" onclick="removeGoal(this)">√ó</button>
            `;
            goalsEl.insertBefore(li, addButton);
            li.querySelector('input').focus();
        }

        // Emoji picker functionality for papers
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('emoji-option')) {
                const emoji = e.target.dataset.emoji;
                document.getElementById('paperEmoji').value = emoji;
                
                // Update visual selection
                document.querySelectorAll('.emoji-option').forEach(opt => opt.classList.remove('selected'));
                e.target.classList.add('selected');
            }
        });

        // Initialize app
        updateStats();
        renderPapers();
    </script>
</body>
</html>
